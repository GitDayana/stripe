(function(){$(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;return $("html").hasClass("cssgradients")||$("body").prepend('<div class="top-bg"></div>'),m=!1,n=$("section#carousel"),r=n.find("> div"),t=$("section#carousel-captions"),e=t.find("p"),N=r.outerWidth(),p=r.find("figure").first().outerWidth(),v=function(e){var t;return t=r.find("figure").length-1,e<0&&(e=t),e>t&&(e=0),e},u=null,h=!1,S=function(e,t,n){return n==null&&(n=!1),n?e.css("transform","translateX("+t+"px)"):(e.addClass("no-transition"),e.css("transform","translateX("+t+"px)"),window.setTimeout(function(){return e.removeClass("no-transition")}))},T=[],g=function(e,t){var i,s,o,a,f,l,c,d,v,g,b,w,E,x,C,k,L,A,O;if(h)return;if(!m)return;f=n.find("figure"),e<0&&(e=0),E=f.length-1,e>E&&(e=E);if(e===u)return;a=f.eq(e),A=[];if(u!=null){g=Math.abs(e-u),e<u?(d=[E,E-1],x="prepend",L="prev"):(d=[0,1],x="append",L="next"),v=[];for(w=O=1;1<=g?O<=g:O>=g;w=1<=g?++O:--O)k=f.eq(d[w-1]),A.push(k),T.length>0?(c=T.pop(),c.attr("data-name",k.attr("data-name")),c.find("img").attr("src",k.find("img").attr("src"))):c=k.clone(!0),c.addClass("tmp"+w+" temporary"),v.push(c);r[x](x==="prepend"?v.reverse():v)}return window.transitionEnd(r,function(){if(A.length>0)while(A.length>0)c=A.pop().detach(),T.push(c);return r.find(".temporary").removeClass("temporary tmp1 tmp2"),S(r,0,!1),u=r.find(".selected").index(),setTimeout(function(){h=!1;if(t!=null)return t()},50)}),C=e*p,l=N/2,b=l-C-p/2,s=a.prevAll(),i=a.nextAll(),o=r.find(".selected, .prev, .next"),y(a.attr("data-name"),!0),o.removeClass("selected prev next"),s.addClass("prev"),i.addClass("next"),a.addClass("selected"),S(r,b,!0),h=!0},d=function(){var e,t,r;if(h){setTimeout(d,1e3);return}return r={},t=[],n.find("img").each(function(e,n){var i,s,o;return i=$(n),o=i.attr("data-src-thumb"),s=i.attr("data-src-full"),r[s]=o,t.push(window.imagePathForRatio(s))}),e=function(e){var t,n,i;i=[];for(t in r)n=r[t],n=window.imagePathForRatio(n),t=window.imagePathForRatio(t),i.push($("img[src='"+n+"']").attr("src",window.imagePathForRatio(t)));return i},window.preload(t,e,!1)},w=function(){var e,t;return t=[],e={},$("#logos img").each(function(){var n;return n=window.imagePathForRatio($(this).attr("data-src")),e[n]=$(this),t.push(n)}),window.preload(t,function(t){var n,r;for(r in e)n=e[r],n.attr("src",r);return $("article#logos").removeClass("hidden")})},l=2,E=!1,a=!1,b=function(){var e;return e=function(){return w(),setTimeout(d,1e3)},m=!0,g(l,e)},y=function(e){var n,r;return n=t.find(".shown"),r=t.find("[data-name="+e+"]"),n.removeClass("shown"),r.addClass("shown")},i=n.find("img"),o=i.not(":eq("+l+")"),x=function(){var e,t,n;n=[];for(e=0,t=o.length;e<t;e++)f=o[e],n.push(window.imagePathForRatio($(f).attr("data-src-thumb")));return n}(),s=i.eq(l),c=window.imagePathForRatio(s.attr("data-src-full")),x.push(c),window.preload(x,function(e){return s.attr("src",c),o.each(function(){return $(this).attr("src",window.imagePathForRatio($(this).attr("data-src-thumb")))}),b()}),$("html").hasClass("csstransitions")||w(),n.find("figure").click(function(e){return g($(this).index())}),$(document).keydown(function(e){if(e.ctrlKey||e.metaKey)return;switch(e.keyCode){case 37:return g(v(u-1));case 39:return g(v(u+1))}})})}).call(this);