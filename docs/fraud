<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Fraud Protection</title>
    <link rel="stylesheet" type="text/css" href="../assets/site-e2d44e0334cb99f0b81b5a86ba15fc05.css" media="screen" />
    <script type="text/javascript">
        var _sf_startpt=(new Date()).getTime()
        var APIValues = {};
    </script>
    <script src="../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../assets/analytics-0ea5a2b2ad899260c73440d84f5ab7bc.js"></script>

    <link rel="shortcut icon" href="../favicon.ico">

    <!--[if lt IE 9]>
    <script src="/assets/html5shiv-17761200a17ebcb716dda86cca6d2472.js"></script>
    <![endif]-->
    <script type="text/javascript" src="https://use.typekit.net/gbh7uto.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    
    <meta name="csrf-token" content="rX4pYaibSGTzoseW7MrdnSEwvBAf5sNWq5C3PILDlXElVCyisfgN1ACynUaysGEWGY1G-A6NF25iiiBQA84x6w==" />
</head>
<body id="documentation">

  <div id="header">
    <h1><a href="../country?country=CH&amp;redirect=%252F">Stripe</a></h1>
    <div class="navigation">
    <div class="signin"><a id='signin' href="https://dashboard.stripe.com/login"><span>Sign In</span></a></div>

  <ul class="global">
    <li><a href="../docs.1" class="selected">Documentation</a></li>
    <li><a href="https://support.stripe.com">Help &amp; Support</a></li>
  </ul>
</div>

  </div><!-- #header -->

  <section id="doc">


  <nav>

    <h1 class="references">Development</h1>
    <ul>      <li class="unselected"><a href="../docs.1">Getting Started</a></li>
      <li class="unselected sub"><a href="https://stripe.com/docs/checkout/tutorial">Embedded Form</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fcustom-form">Custom Forms</a></li>
      <li class="unselected sub"><a href="mobile/index.html">Mobile Apps</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fcharges">Charging Cards</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Ftesting">Testing</a></li>
      <li class="unselected"><a href="../security">Security</a></li>
      <li class="selected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Ffraud">Fraud Protection</a></li>
      <li class="unselected"><a href="webhooks/index.html">Webhooks</a></li>
      <li class="unselected"><a href="guides/ach">ACH Guide</a></li>
      <li class="unselected"><a href="guides/bitcoin">Bitcoin Guide</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Falipay">Alipay Guide</a></li>
      <li class="unselected"><a href="guides/file-upload">File Upload Guide</a></li>
</ul>

    <h1 class="getting-started">Account</h1>
    <ul>      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fdashboard">Your Account</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Ftransfers">Getting Paid</a></li>
      <li class="unselected"><a href="disputes/index.html">Disputes</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fdisputes%252Fevidence">Submitting Evidence</a></li>
      <li class="unselected sub"><a href="../help/dispute-types">Dispute Types</a></li>
      <li class="unselected sub"><a href="../help/disputes">Disputes FAQ</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fintegrations">Integrations</a></li>
</ul>

    <h1 class="faq">References</h1>
    <ul>      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fexamples">Examples</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fstripe.js">Stripe.js</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fcheckout">Checkout</a></li>
      <li class="unselected"><a href="libraries/index.html">API Libraries</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fupgrades">API Upgrades</a></li>

      <li class="unselected">
        <a href="api/index.html" class="external" target="_blank">Full API Reference</a>
      </li>
    </ul>

    <h1 class="subscriptions">Subscriptions</h1>
    <ul>      <li class="unselected"><a href="subscriptions.1">Getting Started</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fsubscriptions%252Fguide">Detailed Guide</a></li>
</ul>

    <h1 class="orders">Relay</h1>
    <ul>      <li class="unselected"><a href="relay/index.html">Overview</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Frelay%252Fapps-guide">Apps Guide</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Frelay%252Fapps-error-guide">Error Handling Guide</a></li>
</ul>

    <h1 class="connect">Connect</h1>
    <ul>      <li class="unselected"><a href="connect/index.html">Overview</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fconnecting-to-accounts">Connecting to Accounts</a></li>
      <li class="unselected sub"><a href="connect/oauth">Standalone Accounts</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fauthentication">Authentication</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Freference">OAuth Reference</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fpayments-fees">Payments and Fees</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fspecial-case-transfers">Special-case Transfers</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fmanaged-accounts">Managed Accounts</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fupdating-accounts">Updating Accounts</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fidentity-verification">Identity Verification</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Frequired-verification-information">Verification Fields</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Ftesting-verification">Testing Verification</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fbank-transfers">Bank Transfers</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fmigrating">Migrating Recipients</a></li>
      <li class="unselected sub"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fbest-practices">Best Practices</a></li>
      <li class="unselected"><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Ftesting">Testing</a></li>
</ul>

    <h1 class="more">About Stripe</h1>
    <ul>      <li class="unselected"><a href="../help/contact">Contact</a></li>
      <li class="unselected"><a href="../pt">Global Users</a></li>
      <li class="unselected last"><a href="../country?country=CH&amp;redirect=%252Fgallery">Gallery</a></li>
</ul>

  </nav>

    <section id="content">
      <section id="details">

  <header>
    <h1>Fraud Protection</h1>
    <p>
      Stripe offers integrated, automatic fraud protection for users of Stripe.js and Checkout.
    </p>
  </header>

  <article>

  <p>If you use Stripe.js or Checkout, Stripe automatically evaluates charges for
  fraud risk and blocks those we believe are fraudulent. This process is
  automatic and does not require any extra integration work, but you can
  improve the accuracy of our assessments by letting us know if you believe a
  charge is fraudulent or legitimate. (If you are unfamiliar with how fraud
  can affect your business, or with the dispute process, see our support page
  on <a href="https://support.stripe.com/questions/avoiding-fraud-and-disputes">avoiding fraud and disputes</a>.)</p>

<h1 id="getting-information-on-stripe-fraud">Getting information on charges Stripe thinks are fraudulent</h1>

<p>If Stripe believes a payment is fraudulent, we will block the charge
creation attempt. The error hash returned by the API will have a
<code>decline_code</code> key with a value of <code>fraudulent</code>:</p>
<section class="code-example">
<div class="terminal-wrap">
<pre><code><pre class="language-bash"><code class="language-bash">curl <span class='token string'>https://api.stripe.com/v1/charges</span> \
   -u <span class='token string'>sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>: \
   -d <span class='token keyword'>card</span>=<span class='token string'>tok_51ZM3BwtekpEyl</span> \
   -d <span class='token keyword'>amount</span>=<span class='token string'>2000</span> \
   -d <span class='token keyword'>currency</span>=<span class='token string'>usd</span>
</code></pre></code></pre>
</div></section>

<p>The above returns the following in the response:</p>

<section class="code-example">
<div class="terminal-wrap">
<pre><code><span class="highlight_js javascript">{
  &quot;error&quot;: {
    &quot;message&quot;: &quot;Your card was declined.&quot;,
    &quot;type&quot;: &quot;card_error&quot;,
    &quot;code&quot;: &quot;card_declined&quot;,
    &quot;decline_code&quot;: &quot;fraudulent&quot;,
    &quot;charge&quot;: &quot;ch_5IZNUkTDe6ir9d&quot;
  }
}</span></code></pre>
</div>
</section>


<p>Furthermore, the charge's <code>fraud_details</code> hash  will have a
<code>stripe_report</code> key with a value of <code>fraudulent</code>:</p>
<section class="code-example">
<div class="terminal-wrap">
<pre><code><pre class="language-bash"><code class="language-bash">curl <span class='token string'>https://api.stripe.com/v1/charges/ch_51ZhLzPgyOpiIo</span> \
   -u <span class='token string'>sk_test_BQokikJOvBiI2HlWgH4olfQ2</span>:
</code></pre></code></pre>
</div></section>

<p>The above returns the following in the response:</p>

<section class="code-example">
<div class="terminal-wrap">
<pre><code><span class="highlight_js javascript">{
  ...
  &quot;statement_description&quot;: null,
  &quot;fraud_details&quot;: {
    &quot;stripe_report&quot;: &quot;fraudulent&quot;,
  },
  &quot;receipt_email&quot;: null,
  ...
}</span></code></pre>
</div>
</section>


<p>Payments blocked by Stripe are also indicated as such in the dashboard.
Stripe evaluates fraud risk using machine learning algorithms that predict
what is fraudulent based on your charge and dispute history. You will not see
risk assessments (in the dashboard or in the API) until you have accumulated
enough volume for our algorithms to give you relevant results. This will
happen automatically.</p>

<p>Note that testmode charges (other than those using test card numbers
intended to simulate CVC or AVS mismatches) will not trigger our fraud
controls.</p>

<h1 id="reporting-fraud">Reporting a charge as fraudulent</h1>

<p>If you believe a charge is fraudulent and Stripe did not block it, you
should refund it and let Stripe know. We will use the information to improve
our fraud detection algorithms. You can "report and refund" a fraudulent
payment from the dashboard by clicking the "Report fraudulent payment" link
when viewing the payment. Alternatively, you can use the API.</p>

<section class="code-example">
  <nav class="lang-control">
    <a href="index.html">ruby</a>
    <a href="index.html">python</a>
    <a href="index.html">php</a>
    <a href="index.html">node</a>
    <a href="index.html">java</a>
  </nav>
  <div class="terminal-wrap" data-action="tutorial_mark_as_fraudulent">
    <pre><code><div class="terminal"></div></code></pre>
  </div>
</section>

<h1 id="reporting-safe">Reporting a charge as safe</h1>

<p>If a charge has been declined and you know that it was made legitimately
(for example, you may have a long-standing relationship with the customer), you
can check if Stripe blocked it because we believed it was fraudulent. If so,
you can mark the charge as safe&mdash;this will allow you to retry the charge,
and it will also improve Stripe's assessments in the future. You can see which
payments Stripe has declined in the dashboard and mark them as safe there, or
you can use the API.</p>

<section class="code-example">
  <nav class="lang-control">
    <a href="index.html">ruby</a>
    <a href="index.html">python</a>
    <a href="index.html">php</a>
    <a href="index.html">node</a>
    <a href="index.html">java</a>
  </nav>
  <div class="terminal-wrap" data-action="tutorial_mark_as_safe">
    <pre><code><div class="terminal"></div></code></pre>
  </div>
</section>

<h1 id="sending-info">Improving fraud detection</h1>

<p>Besides marking charges as <code>fraudulent</code> or <code>safe</code>, you
can improve Stripe's risk assessments by sending us as much information as
possible about each charge. For example, billing addresses, which you can
capture with Stripe.js, often provide hints as to the legitimacy of a
transaction. If you ship physical goods, sending us shipping addresses will
also help. If you have any other data that you think might be indicative of 
fraud, include it in the <code>metadata</code> for your charges. Our systems are
constantly evolving, and we're ever on the lookout for additional signals to
incorporate.</p>

<p>For more information, see the documentation for creating and updating charges
(links below).</p>

<p><a href="../country?country=CH&amp;redirect=%252Fdocs%252Fcheckout">Checkout</a> automatically captures a number
of parameters that we know to be highly suggestive of fraud. Using Checkout
provides the highest level of fraud protection from Stripe.</p>

<h1 id="testing">Testing</h1>

<p>You can make testmode charges with the card number <code>4100 0000 0000 0019</code>
to simulate a charge that Stripe thinks is fraudulent.</p>

<h1>More information</h1>
  <ul>
    <li><a href="api/index.html#create_charge">Creating charges</a></li>
    <li><a href="api/index.html#update_charge">Updating charges</a></li>
    <li><a href="https://support.stripe.com/questions/avoiding-fraud-and-disputes">Avoiding fraud and disputes</a></li>
  </ul>

</article>

</section>



      <footer class="clearfix">
  <section class="questions">
    <h1>Questions?</h1>
    <p>We're always happy to help with code or other questions you might have! Check out our answers to <a href="https://support.stripe.com">common questions</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.</p>

  </section>
</footer>
    </section>

  </section><!-- #documentation -->

  <div id="footer">
    <div class="country-dropdown-view">
        <a class="select">
            <span>
                <img src="../img/flags/us.png" width="23" height="17" data-hires="true" />
                <strong>United States</strong>
            </span>
        </a>

        <div class="popover">
            <div class="arrow"></div>
            <h4>Select your Country</h4>
            <ul>
                    <li>
                        <a href="../country?country=AU&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/au.png" width="23" height="17" data-hires="true" />
                            <span>Australia</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=CA&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/ca.png" width="23" height="17" data-hires="true" />
                            <span>Canada</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=DK&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/dk.png" width="23" height="17" data-hires="true" />
                            <span>Denmark</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=FI&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/fi.png" width="23" height="17" data-hires="true" />
                            <span>Finland</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=GB&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/gb.png" width="23" height="17" data-hires="true" />
                            <span>United Kingdom</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=IE&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/ie.png" width="23" height="17" data-hires="true" />
                            <span>Ireland</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=NO&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/no.png" width="23" height="17" data-hires="true" />
                            <span>Norway</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=SE&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/se.png" width="23" height="17" data-hires="true" />
                            <span>Sweden</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=US&amp;redirect=%252Fdocs%252Ffraud" class="selected">
                            <img src="../img/flags/us.png" width="23" height="17" data-hires="true" />
                            <span>United States</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=AT&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/at.png" width="23" height="17" data-hires="true" />
                            <span>Austria</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=BE&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/be.png" width="23" height="17" data-hires="true" />
                            <span>Belgium</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=BR&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/br.png" width="23" height="17" data-hires="true" />
                            <span>Brazil</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=FR&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/fr.png" width="23" height="17" data-hires="true" />
                            <span>France</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=DE&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/de.png" width="23" height="17" data-hires="true" />
                            <span>Germany</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=IT&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/it.png" width="23" height="17" data-hires="true" />
                            <span>Italy</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=JP&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/jp.png" width="23" height="17" data-hires="true" />
                            <span>Japan</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=LU&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/lu.png" width="23" height="17" data-hires="true" />
                            <span>Luxembourg</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=MX&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/mx.png" width="23" height="17" data-hires="true" />
                            <span>Mexico</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=NL&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/nl.png" width="23" height="17" data-hires="true" />
                            <span>Netherlands</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=PT&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/pt.png" width="23" height="17" data-hires="true" />
                            <span>Portugal</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=SG&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/sg.png" width="23" height="17" data-hires="true" />
                            <span>Singapore</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=ES&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/es.png" width="23" height="17" data-hires="true" />
                            <span>Spain</span>
                        </a>
                    </li>
                    <li>
                        <a href="../country?country=CH&amp;redirect=%252Fdocs%252Ffraud" >
                            <img src="../img/flags/ch.png" width="23" height="17" data-hires="true" />
                            <span>Switzerland</span>
                        </a>
                    </li>
          </ul>
        </div>
    </div>


    <p><a href="../country?country=CH&amp;redirect=%252F">&copy; Stripe</a></p>

    <ul>
        <li><a href="https://status.stripe.com"><span>System Status</span></a></li>
        <li><a href="../country?country=CH&amp;redirect=%252Fabout">About</a></li>
        <li><a href="../blog/page/1"><span>Blog</span></a></li>
        <li><a href="../jobs/index.html"><span>Jobs</span></a></li>
        <li><a href="http://twitter.com/stripe">Twitter</a></li>
    </ul>
    <ul class="lesser">
        <li><a href="../terms">Terms of Service</a></li>
        <li><a href="../privacy">Privacy Policy</a></li>
    </ul>
</div>
<div class="country-dropdown-overlay"></div>

    <script src="../assets/jquery-47d53801b9f61ca8a21dcc2571aeb3ec.js"></script>
    <script src="../assets/shared-3abadcaa3af6e785a085062e45894014.js"></script>


    <script src="../assets/tutorial-f035eaa45be8fa19a028ee35613aca55.js"></script>
  <script type="text/javascript">
      var APIValues = {};
        APIValues["ruby"] = {};
            APIValues["ruby"]["tutorial_mark_as_fraudulent"] = "\u003Cspan class=\"highlight_js ruby\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nStripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\n# If you haven\u0026#39;t refunded the charge, you can do so and let Stripe\n# know it was fraudulent in one step.\ncharge = Stripe::Charge.retrieve(charge_id)\ncharge.refunds.create(reason: \u0026#39;fraudulent\u0026#39;)\n\n# If you already refunded the charge (without specifying the\n# \u0026#39;fraudulent\u0026#39; reason), you can still let us know it was fraudulent.\nrefunded_charge = Stripe::Charge.retrieve(refunded_charge_id)\nrefunded_charge.mark_as_fraudulent\u003C/span\u003E";
            APIValues["ruby"]["tutorial_mark_as_safe"] = "\u003Cspan class=\"highlight_js ruby\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nStripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\n# Retrieve the charge and check if Stripe thought it was\n# fraudulent.\ncharge = Stripe::Charge.retrieve(charge_id)\n\n# If Stripe declined the charge due to fraud risk but you know the payment\n# was legitimate, you can mark it as safe and then retry.\nif charge.fraud_details[\u0026#39;stripe_report\u0026#39;] == \u0026#39;fraudulent\u0026#39;\n  charge.mark_as_safe\n  # ...retry the payment\nend\u003C/span\u003E";
        APIValues["python"] = {};
            APIValues["python"]["tutorial_mark_as_fraudulent"] = "\u003Cspan class=\"highlight_js python\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nstripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\n# If you haven\u0026#39;t refunded the charge, you can do so and let Stripe\n# know it was fraudulent in one step.\ncharge = stripe.Charge.retrieve(charge_id)\ncharge.refunds.create(reason=\u0026#39;fraudulent\u0026#39;)\n\n# If you already refunded the charge (without specifying the\n# \u0026#39;fraudulent\u0026#39; reason), you can still let us know it was fraudulent.\nrefunded_charge = stripe.Charge.retrieve(refunded_charge_id)\nrefunded_charge.mark_as_fraudulent()\u003C/span\u003E";
            APIValues["python"]["tutorial_mark_as_safe"] = "\u003Cspan class=\"highlight_js python\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nstripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\n# Retrieve the charge and check if Stripe thought it was\n# fraudulent.\ncharge = stripe.Charge.retrieve(charge_id)\n\n# If Stripe declined the charge due to fraud risk but you know the payment\n# was legitimate, you can mark it as safe and then retry.\nif charge.fraud_details.get(\u0026#39;stripe_report\u0026#39;, None) == \u0026#39;fraudulent\u0026#39;\n  charge.mark_as_safe()\n  # ...retry the payment\nend\u003C/span\u003E";
        APIValues["php"] = {};
            APIValues["php"]["tutorial_mark_as_fraudulent"] = "\u003Cspan class=\"highlight_js php\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\n\\Stripe\\Stripe::setApiKey(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// If you haven\u0026#39;t refunded the charge, you can do so and let Stripe\n// know it was fraudulent in one step.\n$charge = \\Stripe\\Charge::retrieve($charge_id);\n$charge-\u0026gt;refunds-\u0026gt;create(array(\u0026quot;reason\u0026quot; =\u0026gt; \u0026quot;fraudulent\u0026quot;));\n\n// If you already refunded the charge (without specifying the\n// \u0026#39;fraudulent\u0026#39; reason), you can still let us know it was fraudulent.\n$refunded_charge = \\Stripe\\Charge::retrieve($refunded_charge_id);\n$refunded_charge-\u0026gt;markAsFraudulent();\u003C/span\u003E";
            APIValues["php"]["tutorial_mark_as_safe"] = "\u003Cspan class=\"highlight_js php\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\n\\Stripe\\Stripe::setApiKey(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// Retrieve the charge and check if Stripe thought it was\n// fraudulent.\n$charge = \\Stripe\\Charge::retrieve($charge_id);\n\n// If Stripe declined the charge due to fraud risk but you know the payment\n// was legitimate, you can mark it as safe and then retry.\nif ($charge[\u0026#39;fraud_details\u0026#39;][\u0026#39;stripe_report\u0026#39;] == \u0026#39;fraudulent\u0026#39;) {\n  $charge-\u0026gt;markAsSafe();\n  // ...retry the payment\n}\u003C/span\u003E";
        APIValues["node"] = {};
            APIValues["node"]["tutorial_mark_as_fraudulent"] = "\u003Cspan class=\"highlight_js javascript\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\nvar stripe = require(\u0026quot;stripe\u0026quot;)(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// If you haven\u0026#39;t refunded the charge, you can do so and let Stripe\n// know it was fraudulent in one step.\nstripe.charges.createRefund(\n  charge_id, {\u0026quot;reason\u0026quot;: \u0026quot;fraudulent\u0026quot;})\n\n// If you already refunded the charge (without specifying the\n// \u0026#39;fraudulent\u0026#39; reason), you can still let us know it was fraudulent.\nstripe.charges.markAsFraudulent(charge_id);\u003C/span\u003E";
            APIValues["node"]["tutorial_mark_as_safe"] = "\u003Cspan class=\"highlight_js javascript\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\nvar stripe = require(\u0026quot;stripe\u0026quot;)(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// Retrieve the charge and check if Stripe thought it was\n// fraudulent.\nstripe.charges.retrieve(charge_id, {},\n  function(err, charge) {\n  // If Stripe declined the charge due to fraud risk but you know the payment\n  // was legitimate, you can mark it as safe and then retry.\n  if(charge[\u0026#39;fraud_details\u0026#39;][\u0026#39;stripe_report\u0026#39;] == \u0026#39;fraudulent\u0026#39;) {\n    stripe.charges.markAsSafe(charge_id);\n    // ...retry the payment\n  }\n});\u003C/span\u003E";
        APIValues["java"] = {};
            APIValues["java"]["tutorial_mark_as_fraudulent"] = "\u003Cspan class=\"highlight_js java\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\nStripe.apiKey = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;;\n\n// If you haven\u0026#39;t refunded the charge, you can do so and let Stripe\n// know it was fraudulent in one step.\nCharge charge = Charge.retrieve(chargeId);\n\nMap\u0026lt;String, Object\u0026gt; refundParams = new HashMap\u0026lt;String, Object\u0026gt;();\nrefundParams.put(\u0026quot;reason\u0026quot;, \u0026quot;fraudulent\u0026quot;);\n\ncharge.refund(refundParams);\n\n// If you already refunded the charge (without specifying the\n// \u0026#39;fraudulent\u0026#39; reason), you can still let us know it was fraudulent.\nCharge refundedCharge = Charge.retrieve(refundedChargeId);\nrefundedCharge.markFraudulent((RequestOptions) null);\u003C/span\u003E";
            APIValues["java"]["tutorial_mark_as_safe"] = "\u003Cspan class=\"highlight_js java\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\nStripe.apiKey = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;;\n\n// Retrieve the charge and check if Stripe thought it was\n// fraudulent.\nCharge charge = Charge.retrieve(chargeId);\n\n// If Stripe declined the charge due to fraud risk but you know the payment\n// was legitimate, you can mark it as safe and then retry.\nif ((charge.getFraudDetails().getStripeReport()) != null \u0026amp;\u0026amp;\n    (charge.getFraudDetails().getStripeReport().equals(\u0026quot;fraudulent\u0026quot;))) {\n  charge.markSafe((RequestOptions) null);\n  // ...retry the payment\n}\u003C/span\u003E";
  </script>


  <script src="../assets/documentation-4ba5fcc79adb6fc04e36d4af597eb53b.js"></script>
  <script src="../assets/highlight.pack-2286570da0bb1b3179fb57ccf73939c5.js"></script>
<script src="../assets/highlighter-e9cf653413c50b1b2558992fba0cb323.js"></script>

  <script type="text/javascript">
    Analytics.viewed("docs");
  </script>
</body>
</html>
