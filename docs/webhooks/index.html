<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Webhooks</title>
    <link rel="stylesheet" type="text/css" href="../../assets/site-e2d44e0334cb99f0b81b5a86ba15fc05.css" media="screen" />
    <script type="text/javascript">
        var _sf_startpt=(new Date()).getTime()
        var APIValues = {};
    </script>
    <script src="../../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../../assets/analytics-0ea5a2b2ad899260c73440d84f5ab7bc.js"></script>

    <link rel="shortcut icon" href="../../favicon.ico">

    <!--[if lt IE 9]>
    <script src="/assets/html5shiv-17761200a17ebcb716dda86cca6d2472.js"></script>
    <![endif]-->
    <script type="text/javascript" src="https://use.typekit.net/gbh7uto.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    
    <meta name="csrf-token" content="KD-09lA1KIW_cJtJxROuDsK5GmyHaak0Czjv2Kel_7ugFbE1SVZtNUxgwZmbaRKF-gTghJYCfQzCIni0JqhbIQ==" />

    <link rel="stylesheet" type="text/css" href="../../assets/index.css">
</head>
<body id="documentation">

  <div id="header">
    <h1><a href="../../country?country=CH&amp;redirect=%252F">Stripe</a></h1>
    <div class="navigation">
    <div class="signin"><a id='signin' href="https://dashboard.stripe.com/login"><span>Sign In</span></a></div>

  <ul class="global">
    <li><a href="../../docs.1" class="selected">Documentation</a></li>
    <li><a href="https://support.stripe.com">Help &amp; Support</a></li>
  </ul>
</div>

  </div><!-- #header -->

  <section id="doc">


  <nav>

    <h1 class="references">Development</h1>
    <ul>      <li class="unselected"><a href="../../docs.1">Getting Started</a></li>
      <li class="unselected sub"><a href="https://stripe.com/docs/checkout/tutorial">Embedded Form</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fcustom-form">Custom Forms</a></li>
      <li class="unselected sub"><a href="../mobile/index.html">Mobile Apps</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fcharges">Charging Cards</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Ftesting">Testing</a></li>
      <li class="unselected"><a href="../../security">Security</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Ffraud">Fraud Protection</a></li>
      <li class="selected"><a href="index.html">Webhooks</a></li>
      <li class="unselected"><a href="../guides/ach">ACH Guide</a></li>
      <li class="unselected"><a href="../guides/bitcoin">Bitcoin Guide</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Falipay">Alipay Guide</a></li>
      <li class="unselected"><a href="../guides/file-upload">File Upload Guide</a></li>
</ul>

    <h1 class="getting-started">Account</h1>
    <ul>      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fdashboard">Your Account</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Ftransfers">Getting Paid</a></li>
      <li class="unselected"><a href="../disputes/index.html">Disputes</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fdisputes%252Fevidence">Submitting Evidence</a></li>
      <li class="unselected sub"><a href="../../help/dispute-types">Dispute Types</a></li>
      <li class="unselected sub"><a href="../../help/disputes">Disputes FAQ</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fintegrations">Integrations</a></li>
</ul>

    <h1 class="faq">References</h1>
    <ul>      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fexamples">Examples</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fstripe.js">Stripe.js</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fcheckout">Checkout</a></li>
      <li class="unselected"><a href="../libraries/index.html">API Libraries</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fupgrades">API Upgrades</a></li>

      <li class="unselected">
        <a href="../api/index.html" class="external" target="_blank">Full API Reference</a>
      </li>
    </ul>

    <h1 class="subscriptions">Subscriptions</h1>
    <ul>      <li class="unselected"><a href="../subscriptions.1">Getting Started</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fsubscriptions%252Fguide">Detailed Guide</a></li>
</ul>

    <h1 class="orders">Relay</h1>
    <ul>      <li class="unselected"><a href="../relay/index.html">Overview</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Frelay%252Fapps-guide">Apps Guide</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Frelay%252Fapps-error-guide">Error Handling Guide</a></li>
</ul>

    <h1 class="connect">Connect</h1>
    <ul>      <li class="unselected"><a href="../connect/index.html">Overview</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fconnecting-to-accounts">Connecting to Accounts</a></li>
      <li class="unselected sub"><a href="../connect/oauth">Standalone Accounts</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fauthentication">Authentication</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Freference">OAuth Reference</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fpayments-fees">Payments and Fees</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fspecial-case-transfers">Special-case Transfers</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fmanaged-accounts">Managed Accounts</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fupdating-accounts">Updating Accounts</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fidentity-verification">Identity Verification</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Frequired-verification-information">Verification Fields</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Ftesting-verification">Testing Verification</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fbank-transfers">Bank Transfers</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fmigrating">Migrating Recipients</a></li>
      <li class="unselected sub"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Fbest-practices">Best Practices</a></li>
      <li class="unselected"><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fconnect%252Ftesting">Testing</a></li>
</ul>

    <h1 class="more">About Stripe</h1>
    <ul>      <li class="unselected"><a href="../../help/contact">Contact</a></li>
      <li class="unselected"><a href="../../pt">Global Users</a></li>
      <li class="unselected last"><a href="../../country?country=CH&amp;redirect=%252Fgallery">Gallery</a></li>
</ul>

  </nav>

    <section id="content">
      <section id="details">

  <header>
    <h1>Webhooks</h1>
    <p>
      Use webhooks to be notified about events that happen in a Stripe account.
      If you need help after reading this, check out our answers to <a href="https://support.stripe.com/search?q=webhooks">common questions</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.

    </p>
  </header>

  <article>

<aside class="intro note">
  <h1>Webhook terminology</h1>
  <p>An <em>event</em> is an account occurrence, such as a charge being captured, a transfer paid, or an account being updated. Each occurrence has a corresponding <code>Event</code> object.<p/>
  <p><em>Webhook endpoints</em> are URLs defined by users to which Stripe sends events. A single event may be sent to many webhook endpoints.</p>
  <p><em>Webhooks</em> refers to the overall concept of sending notifications to webhook endpoints.</p>
</aside>

    <p>Interacting with a third-party API like Stripe's can introduce two problems:</p>

<ul>
  <li>Services not directly responsible for making an API request may still need to know the response of that request</li>
  <li>Some events, like disputed charges and many recurring billing events, are not the result of a direct API request</li>
</ul>

<p>Webhooks solve these problems by letting you register a URL that we will notify anytime an event happens in your account. When the event occurs&mdash;for example, when a successful charge is made on a customer's subscription, Stripe creates an <code>Event</code> object. This object contains all the relevant information about what just happened, including the type of event and the data associated with that event. Stripe then sends the <code>Event</code> object to any URLs in your account's webhooks settings via an HTTP POST request.  You can find a full list of all event types in the <a href="../api/index.html#event_types">API docs</a>.</p>

<p>You might use webhooks to:</p>

<ul>
  <li>Update a customer's membership record in your database when a subscription payment succeeds</li>
  <li>Email a customer when a subscription payment fails</li>
  <li>Check out the Dashboard if you see that a dispute was filed</li>
  <li>Make adjustments to an invoice when it's created (but before it's been paid)</li>
  <li>Log an accounting entry when a transfer is paid</li>
</ul>

<p>Understand that you only need to use webhooks for behind-the-scenes transactions. The results of most Stripe requests&mdash;including charge attempts and customer creations&mdash;are reported synchronously to your code, and don't require webhooks for verification. (For example, with a charge request, the charge will immediately succeed and a <code>Charge</code> object returned, or the charge will immediately fail and an exception will be thrown.)</p>

<h2 id="configuring-your-webhook-settings">Configuring your webhook settings</h1>

<p>Webhooks are configured in the <a href="https://dashboard.stripe.com/account/webhooks" target="_blank">webhooks settings</a> section of the Dashboard. Clicking <strong>Add endpoint</strong> reveals a form to add a new URL for receiving webhooks.</p>

<p>Stripe supports two webhook types: Account and Connect. You'll likely want to create an account webhook, unless you've created a <a href="../connect/index.html">Connect application</a>. </p>

<p>You can enter any URL you'd like to have receive the events, but this should be a dedicated page on your server, coded per the instructions below. The mode determines whether test events or live events are sent to this URL; if you want to send both live and test events to the same URL, you need to create two separate settings. You may add as many URLs as you like.</p>

<p>You can also choose to be notified of all event types, or only specific ones.</p>

<h2 id="receiving-a-webhook">Receiving a webhook notification</h1>

<p>Creating a webhoook endpoint on your server is no different from creating any page on your website. With PHP, you might create a new <strong>.php</strong> file on your server; with a framework like Sinatra, you would add a new route with the desired URL.</p>

<p>Webhook data is sent as JSON in the POST request body. The full event details are included and can be used directly, after parsing the JSON into an <a href="../api/index.html#event_object">Event object</a>.</p>

<section class="code-example">
  <nav class="lang-control">
    <a href="../index.html">ruby</a>
    <a href="../index.html">python</a>
    <a href="../index.html">php</a>
    <a href="../index.html">node</a>
    <a href="../index.html">java</a>
  </nav>
  <div class="terminal-wrap" data-action="tutorial_webhook_receive">
    <pre><code><div class="terminal"></div></code></pre>
  </div>
</section>

<h3 id="receiving-webooks-with-csrf-protection">Receiving webhooks with a CSRF-protected server</h3>

<p>
  If you're using Rails, Django, or another web framework, your site may automatically check that every POST request
  contains a <em>CSRF token</em>. This is an important security feature that helps protect you and your users from
  <a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)">cross-site request forgery</a> attempts. However, this security measure may
  also prevent your site from processing legitimate webhooks. If so, you may need to exempt the webhooks route from CSRF protection.
</p>

<section class="code-example">
  <nav class="lang-control">
    <a href="../index.html" data-language="ruby">Rails</a>
    <a href="../index.html" data-language="python">Django</a>
  </nav>
  <div class="terminal-wrap" data-action="tutorial_webhook_csrf_disable">
    <pre><code><div class="terminal"></div></code></pre>
  </div>
</section>

<h3 id="receiving-webhooks-with-an-https-server">Receiving webhooks with an HTTPS server</h2>

<p>If you use an HTTPS URL for your webhook endpoint, Stripe will validate that the connection to your server is secure before sending your webhook data. For this to work, your server must be correctly configured to support HTTPS with a valid server certificate. See our <a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fsecurity%252Fssl">guide on SSL/TLS</a> for details on setting this up.</p>

<h2 id="responding_to_a_webhook">Responding to a webhook</h1>

<p>To acknowledge receipt of a webhook, your endpoint should return a <code>2xx</code> HTTP status code. Any other information you return in the request headers or request body will be ignored. Any response code outside the 2xx range, including 3xx codes, will indicate to Stripe that you did not receive the webhook. This does mean that a URL redirection or a "Not Modified" response will be treated as a failure.</p>

<p>When a webhook is not successfully received for any reason, Stripe will continue trying to send the webhook once an hour for up to 3 days.</p>

<h2>Best practices</h3>

<p>Before going live, test that your webhook is working properly. You can do so by sending dummy test events from the <a href="https://dashboard.stripe.com/account/webhooks" target="_blank">webhooks settings</a> pane. Understand that as these are fake, test events, they will not map to real customers, invoices, charges, or other objects in your account.</p>

<p>If your webhook script performs complex logic, or makes network calls, it's possible the script would timeout before Stripe sees its complete execution. For that reason, you may want to have your webhook endpoint immediately acknowledge receipt by returning a <code>2xx</code> HTTP status code, and then perform the rest of its duties.</p>

<p>Webhook endpoints may occasionally receive the same event more than once. We advise you to guard against  duplicated event receipts by making your event processing <a href="https://en.wikipedia.org/wiki/Idempotence">idempotent</a>. One way of doing this is logging the events you've processed, and then not processing already-logged events.</p>

<p>For optimum security, you can confirm the event data with Stripe before acting upon it. To do so:</p>

<ol>
  <li>Parse the JSON data as above.</li>
  <li>Grab the received <code>Event</code> object ID value.</li>
  <li>Use the <code>Event</code> object ID in a <a href="../api/index.html#retrieve_event">retrieve event</a> API call.</li>
  <li>Take action using the returned <code>Event</code> object.</li>
</ol>

<h2 id="responding_to_a_webhook">Webhooks and API versions</h1>

<p>The structure of an <code>Event</code> object sent in a webhook is dictated by the API version in your account settings at the time of the event's occurrence. For example, if your account is set to an older API version, such as <strong>2015-02-16</strong>, and you change the API version for a specific request via <a href="../api/index.html#versioning">versioning</a>, the <code>Event</code> object generated still aligns with the <strong>2015-02-16</strong> API version.</p>

<p>Further, an <code>Event</code> object will never be changed after the fact. Subsequent updates to your account's API version do not retroactively alter existing <code>Event</code> objects. Fetching older events using a newer API version also has no impact on the event's structure.</p>

<h1>More information</h1>
  <ul>
    <li><a href="../api/index.html#event_types">List of all event types</a></li>
    <li><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fips">List of IP addresses Stripe uses</a></li>
    <li><a href="../subscriptions.1">Recurring billing tutorial</a></li>
    <li><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Flegacy-webhooks">Upgrading from legacy Stripe webhooks</a></li>
    <li><a href="../../country?country=CH&amp;redirect=%252Fdocs%252Frecipes%252Fsending-emails-for-failed-payments">Recipe for sending emails to customers for failed subscription payments</a></li>
  </ul>

</article>

</section>



      <footer class="clearfix">
  <section class="questions">
    <h1>Questions?</h1>
    <p>We're always happy to help with code or other questions you might have! Check out our answers to <a href="https://support.stripe.com">common questions</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.</p>

  </section>
</footer>
    </section>

  </section><!-- #documentation -->

  <div id="footer">
    <div class="country-dropdown-view">
        <a class="select">
            <span>
                <img src="../../img/flags/ch.png" width="23" height="17" data-hires="true" />
                <strong>Switzerland</strong>
            </span>
        </a>

        <div class="popover">
            <div class="arrow"></div>
            <h4>Select your Country</h4>
            <ul>
                    <li>
                        <a href="../../country?country=AU&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/au.png" width="23" height="17" data-hires="true" />
                            <span>Australia</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=CA&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/ca.png" width="23" height="17" data-hires="true" />
                            <span>Canada</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=DK&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/dk.png" width="23" height="17" data-hires="true" />
                            <span>Denmark</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=FI&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/fi.png" width="23" height="17" data-hires="true" />
                            <span>Finland</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=GB&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/gb.png" width="23" height="17" data-hires="true" />
                            <span>United Kingdom</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=IE&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/ie.png" width="23" height="17" data-hires="true" />
                            <span>Ireland</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=NO&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/no.png" width="23" height="17" data-hires="true" />
                            <span>Norway</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=SE&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/se.png" width="23" height="17" data-hires="true" />
                            <span>Sweden</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=US&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/us.png" width="23" height="17" data-hires="true" />
                            <span>United States</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=AT&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/at.png" width="23" height="17" data-hires="true" />
                            <span>Austria</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=BE&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/be.png" width="23" height="17" data-hires="true" />
                            <span>Belgium</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=BR&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/br.png" width="23" height="17" data-hires="true" />
                            <span>Brazil</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=FR&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/fr.png" width="23" height="17" data-hires="true" />
                            <span>France</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=DE&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/de.png" width="23" height="17" data-hires="true" />
                            <span>Germany</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=IT&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/it.png" width="23" height="17" data-hires="true" />
                            <span>Italy</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=JP&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/jp.png" width="23" height="17" data-hires="true" />
                            <span>Japan</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=LU&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/lu.png" width="23" height="17" data-hires="true" />
                            <span>Luxembourg</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=MX&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/mx.png" width="23" height="17" data-hires="true" />
                            <span>Mexico</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=NL&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/nl.png" width="23" height="17" data-hires="true" />
                            <span>Netherlands</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=PT&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/pt.png" width="23" height="17" data-hires="true" />
                            <span>Portugal</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=SG&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/sg.png" width="23" height="17" data-hires="true" />
                            <span>Singapore</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=ES&amp;redirect=%252Fdocs%252Fwebhooks" >
                            <img src="../../img/flags/es.png" width="23" height="17" data-hires="true" />
                            <span>Spain</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../country?country=CH&amp;redirect=%252Fdocs%252Fwebhooks" class="selected">
                            <img src="../../img/flags/ch.png" width="23" height="17" data-hires="true" />
                            <span>Switzerland</span>
                        </a>
                    </li>
          </ul>
        </div>
    </div>


    <p><a href="../../country?country=CH&amp;redirect=%252F">&copy; Stripe</a></p>

    <ul>
        <li><a href="https://status.stripe.com"><span>System Status</span></a></li>
        <li><a href="../../country?country=CH&amp;redirect=%252Fabout">About</a></li>
        <li><a href="../../blog/page/1"><span>Blog</span></a></li>
        <li><a href="../../jobs/index.html"><span>Jobs</span></a></li>
        <li><a href="http://twitter.com/stripe">Twitter</a></li>
    </ul>
    <ul class="lesser">
        <li><a href="../../terms">Terms of Service</a></li>
        <li><a href="../../privacy">Privacy Policy</a></li>
    </ul>
</div>
<div class="country-dropdown-overlay"></div>

    <script src="../../assets/jquery-47d53801b9f61ca8a21dcc2571aeb3ec.js"></script>
    <script src="../../assets/shared-3abadcaa3af6e785a085062e45894014.js"></script>


    <script src="../../assets/tutorial-f035eaa45be8fa19a028ee35613aca55.js"></script>
  <script type="text/javascript">
      var APIValues = {};
        APIValues["ruby"] = {};
            APIValues["ruby"]["tutorial_webhook_receive"] = "\u003Cspan class=\"highlight_js ruby\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nStripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\nrequire \u0026quot;json\u0026quot;\n\n# Using Sinatra\npost \u0026quot;/my/webhook/url\u0026quot; do\n  # Retrieve the request\u0026#39;s body and parse it as JSON\n  event_json = JSON.parse(request.body.read)\n\n  # Do something with event_json\n\n  status 200\nend\u003C/span\u003E";
            APIValues["ruby"]["tutorial_webhook_csrf_disable"] = "\u003Cspan class=\"highlight_js ruby\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nStripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\nclass StripeController \u0026lt; ApplicationController\n  # If your controller accepts requests other than Stripe webhooks,\n  # you\u0026#39;ll probably want to use `protect_from_forgery` to add CSRF\n  # protection for your application. But don\u0026#39;t forget to exempt\n  # your webhook route!\n  protect_from_forgery :except =\u0026gt; :webhook\n\n  def webhook\n    # Process webhook data in `params`\n  end\nend\u003C/span\u003E";
        APIValues["python"] = {};
            APIValues["python"]["tutorial_webhook_receive"] = "\u003Cspan class=\"highlight_js python\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nstripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\nimport json\nfrom django.http import HttpResponse\n\n# Using Django\ndef my_webhook_view(request):\n  # Retrieve the request\u0026#39;s body and parse it as JSON\n  event_json = json.load(request.body)\n\n  # Do something with event_json\n\n  return HttpResponse(status=200)\u003C/span\u003E";
            APIValues["python"]["tutorial_webhook_csrf_disable"] = "\u003Cspan class=\"highlight_js python\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nstripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\nimport json\n\n# Webhooks are always sent as HTTP POST requests, so we want to ensure\n# that only POST requests will reach your webhook view. We can do that by\n# decorating `webhook()` with `require_POST`.\n#\n# Then to ensure that the webhook view can receive webhooks, we need\n# also need to decorate `webhook()` with `csrf_exempt`.\n@require_POST\n@csrf_exempt\ndef webhook(request):\n  # Process webhook data in `request.body`\u003C/span\u003E";
        APIValues["php"] = {};
            APIValues["php"]["tutorial_webhook_receive"] = "\u003Cspan class=\"highlight_js php\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\n\\Stripe\\Stripe::setApiKey(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// Retrieve the request\u0026#39;s body and parse it as JSON\n$input = @file_get_contents(\u0026quot;php://input\u0026quot;);\n$event_json = json_decode($input);\n\n// Do something with $event_json\n\nhttp_response_code(200); // PHP 5.4 or greater\u003C/span\u003E";
        APIValues["node"] = {};
            APIValues["node"]["tutorial_webhook_receive"] = "\u003Cspan class=\"highlight_js javascript\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\nvar stripe = require(\u0026quot;stripe\u0026quot;)(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// Using Express\napp.post(\u0026quot;/my/webhook/url\u0026quot;, function(request, response) {\n  // Retrieve the request\u0026#39;s body and parse it as JSON\n  var event_json = JSON.parse(request.body);\n\n  // Do something with event_json\n\n  response.send(200);\n});\u003C/span\u003E";
        APIValues["java"] = {};
            APIValues["java"]["tutorial_webhook_receive"] = "\u003Cspan class=\"highlight_js java\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account/apikeys\nStripe.apiKey = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;;\n\n// Using Spark framework (http://sparkjava.com)\npublic Object handle(Request request, Response response) {\n  // Retrieve the request\u0026#39;s body and parse it as JSON\n  Event eventJson = APIResource.GSON.fromJson(request.body(), Event.class);\n\n  // Do something with eventJson\n\n  response.status(200);\n  return \u0026quot;\u0026quot;;\n}\u003C/span\u003E";
  </script>


  <script src="../../assets/documentation-4ba5fcc79adb6fc04e36d4af597eb53b.js"></script>
  <script src="../../assets/highlight.pack-2286570da0bb1b3179fb57ccf73939c5.js"></script>
<script src="../../assets/highlighter-e9cf653413c50b1b2558992fba0cb323.js"></script>

  <script type="text/javascript">
    Analytics.viewed("docs");
  </script>
</body>
</html>
